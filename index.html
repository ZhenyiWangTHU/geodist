<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast, Dependency-Free Geodesic Distance Calculations • geodist</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Fast, Dependency-Free Geodesic Distance Calculations">
<meta property="og:description" content='Dependency-free, ultra fast calculation of geodesic
    distances.  Includes the reference nanometre-accuracy geodesic
    distances of Karney (2013) &lt;doi:10.1007/s00190-012-0578-z&gt;, as used by
    the sf package, as well as Haversine and Vincenty distances. Default
    distance measure is the "Mapbox cheap ruler" which is generally more
    accurate than Haversine or Vincenty for distances out to a few hundred
    kilometres, and is considerably faster. The main function accepts one
    or two inputs in almost any generic rectangular form, and returns
    either matrices of pairwise distances, or vectors of sequential
    distances.'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">geodist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.7.002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/geodist.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/hypertidy/geodist/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="geodist" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#geodist" class="anchor"></a>geodist</h1></div>
<p>blah An ultra-lightweight, zero-dependency package for very fast calculation of geodesic distances. Main eponymous function, <code><a href="reference/geodist.html">geodist()</a></code>, accepts only one or two primary arguments, which must be rectangular objects with unambiguously labelled longitude and latitude columns (that is, some variant of <code>lon</code>/<code>lat</code>, or <code>x</code>/<code>y</code>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">50</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">10</span> <span class="op">+</span> <span class="fl">20</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="op">-</span><span class="fl">10</span> <span class="op">+</span> <span class="fl">20</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">10</span> <span class="op">+</span> <span class="fl">20</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">n</span><span class="op">)</span>, <span class="op">-</span><span class="fl">10</span> <span class="op">+</span> <span class="fl">20</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span> <span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span> <span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>
<span class="va">d0</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># A 50-by-50 matrix</span>
<span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="co"># A 50-by-100 matrix</span>
<span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, sequential <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Vector of length 49</span>
<span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, sequential <span class="op">=</span> <span class="cn">TRUE</span>, pad <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Vector of length 50</span></code></pre></div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install latest stable version of <code>geodist</code> from CRAN with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"geodist"</span><span class="op">)</span> <span class="co"># current CRAN version</span></code></pre></div>
<p>Alternatively, current development versions can be installed using any of the following options:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_git.html">install_git</a></span><span class="op">(</span><span class="st">"https://git.sr.ht/~mpadge/geodist"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_bitbucket.html">install_bitbucket</a></span><span class="op">(</span><span class="st">"hypertidy/geodist"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_gitlab.html">install_gitlab</a></span><span class="op">(</span><span class="st">"hypertidy/geodist"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"hypertidy/geodist"</span><span class="op">)</span></code></pre></div>
<p>Then load with</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span> <span class="op">(</span><span class="va"><a href="https://github.com/hypertidy/geodist">geodist</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span> <span class="op">(</span><span class="st">"geodist"</span><span class="op">)</span>
<span class="co">#&gt; [1] '0.0.6.2'</span></code></pre></div>
</div>
<div id="detailed-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#detailed-usage" class="anchor"></a>Detailed Usage</h2>
<p>Input(s) to the <code><a href="reference/geodist.html">geodist()</a></code> function can be in arbitrary rectangular format.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e1</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span> <span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">180</span> <span class="op">+</span> <span class="fl">360</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>,
                     y <span class="op">=</span> <span class="op">-</span><span class="fl">90</span> <span class="op">+</span> <span class="fl">180</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span> <span class="op">(</span><span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Maximum distance is &gt; 100km. The 'cheap' measure is inaccurate over such</span>
<span class="co">#&gt; large distances, you'd likely be better using a different 'measure'.</span>
<span class="co">#&gt; [1] 10 10</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span> <span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">180</span> <span class="op">+</span> <span class="fl">360</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">n</span><span class="op">)</span>,
                     y <span class="op">=</span> <span class="op">-</span><span class="fl">90</span> <span class="op">+</span> <span class="fl">180</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span> <span class="op">(</span><span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Maximum distance is &gt; 100km. The 'cheap' measure is inaccurate over such</span>
<span class="co">#&gt; large distances, you'd likely be better using a different 'measure'.</span>
<span class="co">#&gt; [1] 10 20</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">180</span> <span class="op">+</span> <span class="fl">360</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>,
             <span class="op">-</span><span class="fl">90</span> <span class="op">+</span> <span class="fl">100</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>,
             <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span> <span class="op">(</span><span class="st">"lon"</span>, <span class="st">"lat"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span> <span class="op">(</span><span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Maximum distance is &gt; 100km. The 'cheap' measure is inaccurate over such</span>
<span class="co">#&gt; large distances, you'd likely be better using a different 'measure'.</span>
<span class="co">#&gt; [1] 10 10</span></code></pre></div>
<p>All outputs are distances in metres, calculated with a variety of spherical and elliptical distance measures. Distance measures currently implemented are Haversine, Vincenty (spherical and elliptical)), the very fast <a href="https://github.com/mapbox/cheap-ruler-cpp/blob/master/include/mapbox/cheap_ruler.hpp">mapbox cheap ruler</a> (see their <a href="https://blog.mapbox.com/fast-geodesic-approximations-with-cheap-ruler-106f229ad016">blog post</a>), and the “reference” implementation of <a href="https://link.springer.com/content/pdf/10.1007/s00190-012-0578-z.pdf">Karney (2013)</a>, as implemented in the package <a href="https://cran.r-project.org/package=sf"><code>sf</code></a>. (Note that <code>geodist</code> does not accept <a href="https://cran.r-project.org/package=sf"><code>sf</code></a>-format objects; the <a href="https://cran.r-project.org/package=sf"><code>sf</code></a> package itself should be used for that.) The <a href="https://github.com/mapbox/cheap-ruler-cpp">mapbox cheap ruler algorithm</a> is intended to provide approximate yet very fast distance calculations within small areas (tens to a few hundred kilometres across).</p>
<div id="benchmarks-of-geodesic-accuracy" class="section level3">
<h3 class="hasAnchor">
<a href="#benchmarks-of-geodesic-accuracy" class="anchor"></a>Benchmarks of geodesic accuracy</h3>
<p>The <code><a href="reference/geodist_benchmark.html">geodist_benchmark()</a></code> function - the only other function provided by the <code>geodist</code> package - compares the accuracy of the different metrics to the nanometre-accuracy standard of <a href="https://link.springer.com/content/pdf/10.1007/s00190-012-0578-z.pdf">Karney (2013)</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/geodist_benchmark.html">geodist_benchmark</a></span> <span class="op">(</span>lat <span class="op">=</span> <span class="fl">30</span>, d <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span>
<span class="co">#&gt;            haversine    vincenty       cheap</span>
<span class="co">#&gt; absolute 0.790954905 0.790954905 0.579482464</span>
<span class="co">#&gt; relative 0.002104721 0.002104721 0.001607779</span></code></pre></div>
<p>All distances (<code>d)</code> are in metres, and all measures are accurate to within 1m over distances out to several km (at the chosen latitude of 30 degrees). The following plots compare the absolute and relative accuracies of the different distance measures implemented here. The mapbox cheap ruler algorithm is the most accurate for distances out to around 100km, beyond which it becomes extremely inaccurate. Average relative errors of Vincenty distances remain generally constant at around 0.2%, while relative errors of cheap-ruler distances out to 100km are around 0.16%.</p>
<p><img src="articles/fig1.png"></p>
</div>
<div id="performance-comparison" class="section level3">
<h3 class="hasAnchor">
<a href="#performance-comparison" class="anchor"></a>Performance comparison</h3>
<p>The following code demonstrates the relative speed advantages of the different distance measures implemented in the <code>geodist</code> package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e3</span>
<span class="va">dx</span> <span class="op">&lt;-</span> <span class="va">dy</span> <span class="op">&lt;-</span> <span class="fl">0.01</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">100</span> <span class="op">+</span> <span class="va">dx</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="fl">20</span> <span class="op">+</span> <span class="va">dy</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">100</span> <span class="op">+</span> <span class="va">dx</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">n</span><span class="op">)</span>, <span class="fl">20</span> <span class="op">+</span> <span class="va">dy</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span> <span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span> <span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>
<span class="fu">rbenchmark</span><span class="fu">::</span><span class="fu">benchmark</span> <span class="op">(</span>replications <span class="op">=</span> <span class="fl">10</span>, order <span class="op">=</span> <span class="st">"test"</span>,
                       <span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"cheap"</span><span class="op">)</span>,
                       <span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"haversine"</span><span class="op">)</span>,
                       <span class="va">d3</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"vincenty"</span><span class="op">)</span>,
                       <span class="va">d4</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"geodesic"</span><span class="op">)</span><span class="op">)</span> <span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt;                                      test replications elapsed relative</span>
<span class="co">#&gt; 1     d1 &lt;- geodist(x, measure = "cheap")           10   0.081    1.000</span>
<span class="co">#&gt; 2 d2 &lt;- geodist(x, measure = "haversine")           10   0.168    2.074</span>
<span class="co">#&gt; 3  d3 &lt;- geodist(x, measure = "vincenty")           10   0.226    2.790</span>
<span class="co">#&gt; 4  d4 &lt;- geodist(x, measure = "geodesic")           10   3.308   40.840</span></code></pre></div>
<p>Geodesic distance calculation is available in the <a href="https://cran.r-project.org/package=sf"><code>sf</code> package</a>. Comparing computation speeds requires conversion of sets of numeric lon-lat points to <code>sf</code> form with the following code:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span> <span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span>
<span class="va">x_to_sf</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>, <span class="kw">function</span> <span class="op">(</span><span class="va">i</span><span class="op">)</span>
            <span class="fu">sf</span><span class="fu">::</span><span class="fu">st_point</span> <span class="op">(</span><span class="va">x</span> <span class="op">[</span><span class="va">i</span>, <span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>
                <span class="fu">sf</span><span class="fu">::</span><span class="fu">st_sfc</span> <span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">sf</span><span class="fu">::</span><span class="fu">st_sfc</span> <span class="op">(</span>crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e2</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">180</span> <span class="op">+</span> <span class="fl">360</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="op">-</span><span class="fl">90</span> <span class="op">+</span> <span class="fl">180</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span> <span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span> <span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>
<span class="va">xsf</span> <span class="op">&lt;-</span> <span class="fu">x_to_sf</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="va">sf_dist</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">xsf</span><span class="op">)</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu">st_distance</span> <span class="op">(</span><span class="va">xsf</span>, <span class="va">xsf</span><span class="op">)</span>
<span class="va">geo_dist</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"geodesic"</span><span class="op">)</span>
<span class="fu">rbenchmark</span><span class="fu">::</span><span class="fu">benchmark</span> <span class="op">(</span>replications <span class="op">=</span> <span class="fl">10</span>, order <span class="op">=</span> <span class="st">"test"</span>,
                      <span class="fu">sf_dist</span> <span class="op">(</span><span class="va">xsf</span><span class="op">)</span>,
                      <span class="fu">geo_dist</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt; Linking to GEOS 3.8.1, GDAL 3.0.4, PROJ 6.3.2</span>
<span class="co">#&gt;           test replications elapsed relative</span>
<span class="co">#&gt; 2  geo_dist(x)           10   0.066    1.000</span>
<span class="co">#&gt; 1 sf_dist(xsf)           10   0.218    3.303</span></code></pre></div>
<p>Confirm that the two give almost identical results:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span> <span class="op">(</span><span class="fu">sf_dist</span> <span class="op">(</span><span class="va">xsf</span><span class="op">)</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span> <span class="op">(</span><span class="va">xsf</span><span class="op">)</span><span class="op">)</span>
<span class="va">dg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"geodesic"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/formatc.html">formatC</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span> <span class="op">(</span><span class="va">ds</span> <span class="op">-</span> <span class="va">dg</span><span class="op">)</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"e"</span><span class="op">)</span>
<span class="co">#&gt; [1] "9.3132e-09"</span></code></pre></div>
<p>All results are in metres, so the two differ by only around 10 nanometres.</p>
<p>The <a href="https://cran.r-project.org/package=geosphere"><code>geosphere</code> package</a> also offers sequential calculation which is benchmarked with the following code:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fgeodist</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="op">)</span> <span class="fu"><a href="reference/geodist.html">geodist</a></span> <span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"vincenty"</span>, sequential <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">fgeosph</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="op">)</span> <span class="fu">geosphere</span><span class="fu">::</span><span class="fu">distVincentySphere</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="fu">rbenchmark</span><span class="fu">::</span><span class="fu">benchmark</span> <span class="op">(</span>replications <span class="op">=</span> <span class="fl">10</span>, order <span class="op">=</span> <span class="st">"test"</span>,
                       <span class="fu">fgeodist</span> <span class="op">(</span><span class="op">)</span>,
                       <span class="fu">fgeosph</span> <span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt;         test replications elapsed relative</span>
<span class="co">#&gt; 1 fgeodist()           10   0.018    1.000</span>
<span class="co">#&gt; 2  fgeosph()           10   0.042    2.333</span></code></pre></div>
<p><code>geodist</code> is thus around 3 times faster than <code>sf</code> for highly accurate geodesic distance calculations, and around twice as fast as <code>geosphere</code> for calculation of sequential distances.</p>
</div>
<div id="test-results" class="section level3">
<h3 class="hasAnchor">
<a href="#test-results" class="anchor"></a>Test Results</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span> <span class="op">(</span><span class="va">devtools</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span> <span class="op">(</span><span class="va"><a href="https://testthat.r-lib.org">testthat</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/date.html">date</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "Mon Jan 11 15:06:09 2021"</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="st">"tests/"</span><span class="op">)</span>
<span class="co">#&gt; Loading geodist</span>
<span class="co">#&gt; Testing geodist</span>
<span class="co">#&gt; ✔ |  OK F W S | Context</span>
<span class="co">#&gt; ⠏ |   0       | geodist                                                                                                                                                                                                                       ⠏ |   0       | misc tests                                                                                                                                                                                                                    ⠇ |  29       | misc tests                                                                                                                                                                                                                    ✔ |  46       | misc tests [0.2 s]</span>
<span class="co">#&gt; ⠏ |   0       | georange                                                                                                                                                                                                                      ⠏ |   0       | georange                                                                                                                                                                                                                      ⠼ |  15       | georange                                                                                                                                                                                                                      ✔ |  37       | georange [0.2 s]</span>
<span class="co">#&gt; ⠏ |   0       | input-format                                                                                                                                                                                                                  ⠏ |   0       | geodist input formats                                                                                                                                                                                                         ✔ |  18       | geodist input formats</span>
<span class="co">#&gt; ⠏ |   0       | measures                                                                                                                                                                                                                      ⠏ |   0       | geodist measures                                                                                                                                                                                                              ⠹ |  13       | geodist measures                                                                                                                                                                                                              ✔ |  18       | geodist measures [0.2 s]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ══ Results ═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════</span>
<span class="co">#&gt; Duration: 0.6 s</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [ FAIL 0 | WARN 0 | SKIP 0 | PASS 119 ]</span></code></pre></div>
</div>
</div>
<div id="contributors" class="section level2">
<h2 class="hasAnchor">
<a href="#contributors" class="anchor"></a>Contributors</h2>
<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<p>All contributions to this project are gratefully acknowledged using the <a href="https://github.com/ropenscilabs/allcontributors"><code>allcontributors</code> package</a> following the <a href="https://allcontributors.org">all-contributors</a> specification. Contributions of any kind are welcome!</p>
<div id="code" class="section level3">
<h3 class="hasAnchor">
<a href="#code" class="anchor"></a>Code</h3>
<table class="table"><tr>
<td align="center">
<a href="https://github.com/mpadge"> <img src="https://avatars1.githubusercontent.com/u/6697851?v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/commits?author=mpadge">mpadge</a>
</td>
</tr></table>
</div>
<div id="issues" class="section level3">
<h3 class="hasAnchor">
<a href="#issues" class="anchor"></a>Issues</h3>
<table class="table">
<tr>
<td align="center">
<a href="https://github.com/mdsumner"> <img src="https://avatars1.githubusercontent.com/u/4107631?u=c7a3627c592123651d51d002f421c2bd00be172f&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Amdsumner">mdsumner</a>
</td>
<td align="center">
<a href="https://github.com/edzer"> <img src="https://avatars0.githubusercontent.com/u/520851?u=9bc892c3523be428dc211f2ccbcf04e8e0e564ff&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Aedzer">edzer</a>
</td>
<td align="center">
<a href="https://github.com/njtierney"> <img src="https://avatars3.githubusercontent.com/u/6488485?u=3eacd57f61342d1c3cecd5c8ac741b1c4897e1de&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Anjtierney">njtierney</a>
</td>
<td align="center">
<a href="https://github.com/mkuehn10"> <img src="https://avatars0.githubusercontent.com/u/4229651?u=b46361a6063e22f9d902672cb7e776918a1c6951&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Amkuehn10">mkuehn10</a>
</td>
<td align="center">
<a href="https://github.com/asardaes"> <img src="https://avatars3.githubusercontent.com/u/7768461?u=fb573498b515f9bfcaeba8e256852060f6304d0b&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Aasardaes">asardaes</a>
</td>
<td align="center">
<a href="https://github.com/marcosci"> <img src="https://avatars2.githubusercontent.com/u/10864574?u=e5b7e55e122646f47174a9e621ebc91fff177d9b&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Amarcosci">marcosci</a>
</td>
<td align="center">
<a href="https://github.com/mem48"> <img src="https://avatars1.githubusercontent.com/u/15819577?u=4a4078aff5fa01d9ef82b5a504c3068d3ad21f0d&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Amem48">mem48</a>
</td>
</tr>
<tr>
<td align="center">
<a href="https://github.com/SymbolixAU"> <img src="https://avatars2.githubusercontent.com/u/18344164?u=022e0d3bdcca3e224021bae842672bda12b599df&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3ASymbolixAU">SymbolixAU</a>
</td>
<td align="center">
<a href="https://github.com/dcooley"> <img src="https://avatars0.githubusercontent.com/u/8093396?u=2c8d9162f246d90d433034d212b29a19e0f245c1&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Adcooley">dcooley</a>
</td>
<td align="center">
<a href="https://github.com/Robinlovelace"> <img src="https://avatars3.githubusercontent.com/u/1825120?u=461318c239e721dc40668e4b0ce6cc47731328ac&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3ARobinlovelace">Robinlovelace</a>
</td>
<td align="center">
<a href="https://github.com/daniellemccool"> <img src="https://avatars3.githubusercontent.com/u/5112209?u=0692066a22b017884c7055156f9e4e024ebde847&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Adaniellemccool">daniellemccool</a>
</td>
<td align="center">
<a href="https://github.com/espinielli"> <img src="https://avatars0.githubusercontent.com/u/891692?v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3Aespinielli">espinielli</a>
</td>
<td align="center">
<a href="https://github.com/Maschette"> <img src="https://avatars2.githubusercontent.com/u/14663215?u=93694159d02e924e6413bd067d7746f1d16d64c1&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/hypertidy/geodist/issues?q=is%3Aissue+author%3AMaschette">Maschette</a>
</td>
</tr>
</table>
<!-- markdownlint-enable --><!-- prettier-ignore-end --><!-- ALL-CONTRIBUTORS-LIST:END -->
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=geodist">https://​cloud.r-project.org/​package=geodist</a>
</li>
<li>Browse source code at <br><a href="https://github.com/hypertidy/geodist/">https://​github.com/​hypertidy/​geodist/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/hypertidy/geodist/issues">https://​github.com/​hypertidy/​geodist/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Mark Padgham <br><small class="roles"> Author, maintainer </small>  </li>
<li>Michael D. Sumner <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hypertidy/geodist/actions?query=workflow%3AR-CMD-check"><img src="https://github.com/hypertidy/geodist/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://codecov.io/gh/hypertidy/geodist"><img src="https://codecov.io/gh/hypertidy/geodist/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="http://cran.r-project.org/web/packages/geodist"><img src="http://www.r-pkg.org/badges/version/geodist" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Mark Padgham, Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
